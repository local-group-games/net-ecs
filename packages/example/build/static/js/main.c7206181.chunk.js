(this["webpackJsonp@net-ecs/example"]=this["webpackJsonp@net-ecs/example"]||[]).push([[0],[function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(2)),r(n(3))},function(e,t,n){e.exports=n(10)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSystem=function(e,t){return{update:t,query:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(5);t.createEntityAdmin=function(){var e={step:-1,tick:-1,time:0},t=new Map,n=new WeakMap,a=new WeakMap,c=new Set,i=new Set,u=[],f=0;function l(e,n){var r=t.get(n),c=a.get(e);if(r)for(var i in e.query){var u=e.query[i],f=c[i],l=o.contains(f,n),d=u.every((function(e){return r.find((function(t){return t.$type===e.$type}))}));d&&!l?f.push(n):!d&&l&&o.mutableRemoveUnordered(f,n)}else for(var s in e.query)o.mutableRemoveUnordered(c[s],n)}function d(e){for(var t=0;t<u.length;t++){l(u[t],e)}}function s(e,r){var o=t.get(e);if(!o)throw new Error("Attempted to add component ".concat(r.$type," to unregistered entity ").concat(e,"."));if(o.find((function(e){return e.$type===r.$type})))throw new Error("Attempted to add component ".concat(r.$type," to ").concat(e,", which already has a component of that type."));o.push(r),c.add(e);var a=n.get(r);return a||(a=new Set),a.add(e),n.set(r,a),e}function v(e,r){var a=t.get(e);if(!a)throw new Error("Attempted to remove component ".concat(r.$type," to unregistered entity ").concat(e,"."));if(o.mutableRemove(a,r)){var i=n.get(r);if(i.delete(e),0===i.size)p.get(r.$type).release(r),n.delete(r);c.add(e)}return e}function y(e,n){var r=t.get(e);if(!r)throw new Error("Tried to get component ".concat(n.$type," to unregistered entity ").concat(e,"."));for(var o=n.$type,a=0;a<r.length;a++){var c=r[a];if(c.$type===o)return c}throw new Error("Component not found on entity ".concat(e,"."))}var p=new Map,m={addSystem:function(e){var n=function(e){for(var t={},n=0,r=Object.keys(e.query);n<r.length;n++){t[r[n]]=[]}return t}(e);u.push(e),a.set(e,n);var r=!0,o=!1,c=void 0;try{for(var i,f=t.keys()[Symbol.iterator]();!(r=(i=f.next()).done);r=!0){l(e,i.value)}}catch(d){o=!0,c=d}finally{try{r||null==f.return||f.return()}finally{if(o)throw c}}},removeSystem:function(e){o.mutableRemove(u,e)},clock:e,tick:function(n){e.step=n,e.tick+=1,e.time+=n;for(var r=0;r<u.length;r++){var o=u[r],f=a.get(o);f&&o.update(m,f)}c.forEach(d),c.clear(),i.forEach((function(e){var n=t.get(e);if(n)for(var r=0;r<n.length;r++)v(e,n[r]);t.delete(e),d(e)})),i.clear()},createEntity:function(){var e=f+=1;t.set(e,[]);for(var n=0;n<arguments.length;n++)s(e,n<0||arguments.length<=n?void 0:arguments[n]);return c.add(e),e},destroyEntity:function(e){return i.add(e),e},addComponentToEntity:s,removeComponentFromEntity:v,getComponent:y,tryGetComponent:function(e,t){try{return y(e,t)}catch(n){return null}},createComponentFactory:function(e,t,n,a){var c=function(n){return Object.assign(n,t),n.$type=e,n},i=r.createStackPool((function(){return c({})}),(function(e){return o.resetObject(e),c(e)}),a);function u(){for(var e=i.retain(),t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return n.apply(void 0,[e].concat(r)),e}return p.set(e,i),u.$type=e,u}};return m}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStackPool=function(e,t,n){var r=[],o=function(){for(var t=0;t<n;t++)r.push(e())};return{allocate:o,retain:function(){return r.length||o(),r.pop()},release:function(e){r.push(t(e))}}}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(6)),r(n(7)),r(n(8)),r(n(9))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contains=function(e,t){return e.indexOf(t)>-1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mutableRemove=function(e,t){var n=e.indexOf(t);return-1!==n&&(e.splice(n,1),!0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mutableRemoveUnordered=function(e,t){var n=e.length,r=e.indexOf(t);if(-1===r)return!1;var o=e.pop();return r<n-1&&(e[r]=o),!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetObject=function(e){for(var t in e)delete e[t];return e}},function(e,t,n){"use strict";var r;n.r(t),function(e){e[e.Health=0]="Health",e[e.Transform=1]="Transform"}(r||(r={}));var o=n(0),a=Object(o.createEntityAdmin)();window.entityAdmin=a;var c=a.createComponentFactory(r.Health,{max:0,value:0},(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.max=t,e.value=n}),1e3),i=a.createComponentFactory(r.Transform,{x:0,y:0},(function(e,t,n){e.x=t,e.y=n}),1e3),u={damageable:[c]},f=Object(o.createSystem)(u,(function(e,t){var n=t.damageable,r=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var f=i.value,l=e.getComponent(f,c);l.value-=e.clock.step/1e3*10,l.value<=0&&e.destroyEntity(f)}}catch(d){o=!0,a=d}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}})),l={moving:[i]},d=Object(o.createSystem)(l,(function(e,t){var n=t.moving,r=!0,o=!1,a=void 0;try{for(var c,u=n[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var f=c.value,l=e.getComponent(f,i);l.x=Math.sin(.05*e.clock.time),l.y=Math.cos(.05*e.clock.time)}}catch(d){o=!0,a=d}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}})),s=c(100),v=i(1,1);a.createEntity(s,v),a.createEntity(s,v),a.addSystem(f),a.addSystem(d);var y=Date.now();setInterval((function(){var e=performance.now(),t=e-y;a.tick(t),y=e}),1/60*1e3)}],[[1,1]]]);
//# sourceMappingURL=main.c7206181.chunk.js.map